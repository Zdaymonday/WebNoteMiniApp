{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nexport const noteModule = {\n  state: {\n    notes: []\n  },\n  getters: {\n    getNoteList(state) {\n      return state.notes;\n    }\n  },\n  mutations: {\n    editNotes(state, notes) {\n      state.notes = notes;\n    },\n    editNote(state, note) {\n      let old_note = state.notes.find(n => n.id == note.id);\n      old_note.text = note.text;\n    },\n    addNote(state, note) {\n      state.notes.push(note);\n    }\n  },\n  actions: {\n    async getNotes(context) {\n      let token = context.rootState.auth.token;\n      let resposne = await fetch(\"https://localhost:7232/notes\", {\n        method: \"Get\",\n        headers: {\n          \"Accept\": \"application/json\",\n          \"Authorization\": `Bearer ${token}`\n        }\n      });\n      if (resposne.ok) {\n        let arr = await resposne.json();\n        context.commit('editNotes', arr);\n      }\n    },\n    async editNote(context, note) {\n      let token = context.rootState.auth.getToken;\n      let response = await fetch(\"https://localhost:7232/notes\", {\n        method: \"Put\",\n        headers: {\n          \"Content-type\": \"application/json\",\n          \"Authorization\": `Bearer ${token}`\n        },\n        body: JSON.stringify(note)\n      });\n      if (response.ok) context.commit(\"editNote\", note);\n    },\n    async addNote(context, note) {\n      let token = context.rootState.auth.getToken;\n      let response = await fetch(\"https://localhost:7232/notes\", {\n        method: \"Post\",\n        headers: {\n          \"Content-type\": \"application/json\",\n          \"Authorization\": `Bearer ${token}`\n        },\n        body: JSON.stringify(note)\n      });\n      if (response.ok) {\n        let added_note = await response.json();\n        console.log(\"Recieved note: \" + added_note.toString());\n        context.commit(\"addNote\", note);\n      }\n    }\n  },\n  namespaced: true\n};","map":{"version":3,"names":["noteModule","state","notes","getters","getNoteList","mutations","editNotes","editNote","note","old_note","find","n","id","text","addNote","push","actions","getNotes","context","token","rootState","auth","resposne","fetch","method","headers","ok","arr","json","commit","getToken","response","body","JSON","stringify","added_note","console","log","toString","namespaced"],"sources":["C:/Users/Администратор/source/repos/WebNoteMiniApp/webnoteminiapp.vue/src/Store/noteModule.js"],"sourcesContent":["export const noteModule  = {\r\n    state: {\r\n        notes: [],\r\n    },\r\n    getters: {\r\n        getNoteList(state){\r\n            return state.notes;\r\n        }\r\n    },\r\n    mutations:{        \r\n        editNotes(state, notes){\r\n            state.notes = notes;\r\n        },\r\n        editNote(state, note){\r\n            let old_note = state.notes.find(n => n.id == note.id);\r\n            old_note.text = note.text;\r\n        },\r\n        addNote(state, note){\r\n            state.notes.push(note);\r\n        }\r\n    },\r\n\r\n    actions:{ \r\n        async getNotes(context) {\r\n            let token = context.rootState.auth.token;\r\n            let resposne = await fetch(\"https://localhost:7232/notes\", {\r\n                method: \"Get\",\r\n                headers: { \"Accept\": \"application/json\", \"Authorization\":`Bearer ${token}`},\r\n            });\r\n            if (resposne.ok) {\r\n                let arr = await resposne.json();\r\n                context.commit('editNotes', arr);\r\n            }\r\n        },\r\n        async editNote(context, note){\r\n            let token = context.rootState.auth.getToken;\r\n            let response = await fetch(\"https://localhost:7232/notes\", {\r\n                method: \"Put\",\r\n                headers: { \"Content-type\": \"application/json\", \"Authorization\":`Bearer ${token}`},\r\n                body: JSON.stringify(note),\r\n            });\r\n            if(response.ok) context.commit(\"editNote\", note);\r\n            \r\n        },\r\n        async addNote(context, note){\r\n            let token = context.rootState.auth.getToken;\r\n            let response = await fetch(\"https://localhost:7232/notes\", {\r\n                method: \"Post\",\r\n                headers: { \"Content-type\": \"application/json\", \"Authorization\":`Bearer ${token}`},\r\n                body: JSON.stringify(note),\r\n            });\r\n            if(response.ok) \r\n            {\r\n                let added_note = await response.json();\r\n                console.log(\"Recieved note: \" + added_note.toString());\r\n                context.commit(\"addNote\", note);\r\n            }\r\n        }\r\n    },\r\n    namespaced: true,\r\n}"],"mappings":";AAAA,OAAO,MAAMA,UAAU,GAAI;EACvBC,KAAK,EAAE;IACHC,KAAK,EAAE;EACX,CAAC;EACDC,OAAO,EAAE;IACLC,WAAW,CAACH,KAAK,EAAC;MACd,OAAOA,KAAK,CAACC,KAAK;IACtB;EACJ,CAAC;EACDG,SAAS,EAAC;IACNC,SAAS,CAACL,KAAK,EAAEC,KAAK,EAAC;MACnBD,KAAK,CAACC,KAAK,GAAGA,KAAK;IACvB,CAAC;IACDK,QAAQ,CAACN,KAAK,EAAEO,IAAI,EAAC;MACjB,IAAIC,QAAQ,GAAGR,KAAK,CAACC,KAAK,CAACQ,IAAI,CAACC,CAAC,IAAIA,CAAC,CAACC,EAAE,IAAIJ,IAAI,CAACI,EAAE,CAAC;MACrDH,QAAQ,CAACI,IAAI,GAAGL,IAAI,CAACK,IAAI;IAC7B,CAAC;IACDC,OAAO,CAACb,KAAK,EAAEO,IAAI,EAAC;MAChBP,KAAK,CAACC,KAAK,CAACa,IAAI,CAACP,IAAI,CAAC;IAC1B;EACJ,CAAC;EAEDQ,OAAO,EAAC;IACJ,MAAMC,QAAQ,CAACC,OAAO,EAAE;MACpB,IAAIC,KAAK,GAAGD,OAAO,CAACE,SAAS,CAACC,IAAI,CAACF,KAAK;MACxC,IAAIG,QAAQ,GAAG,MAAMC,KAAK,CAAC,8BAA8B,EAAE;QACvDC,MAAM,EAAE,KAAK;QACbC,OAAO,EAAE;UAAE,QAAQ,EAAE,kBAAkB;UAAE,eAAe,EAAE,UAASN,KAAM;QAAC;MAC9E,CAAC,CAAC;MACF,IAAIG,QAAQ,CAACI,EAAE,EAAE;QACb,IAAIC,GAAG,GAAG,MAAML,QAAQ,CAACM,IAAI,EAAE;QAC/BV,OAAO,CAACW,MAAM,CAAC,WAAW,EAAEF,GAAG,CAAC;MACpC;IACJ,CAAC;IACD,MAAMpB,QAAQ,CAACW,OAAO,EAAEV,IAAI,EAAC;MACzB,IAAIW,KAAK,GAAGD,OAAO,CAACE,SAAS,CAACC,IAAI,CAACS,QAAQ;MAC3C,IAAIC,QAAQ,GAAG,MAAMR,KAAK,CAAC,8BAA8B,EAAE;QACvDC,MAAM,EAAE,KAAK;QACbC,OAAO,EAAE;UAAE,cAAc,EAAE,kBAAkB;UAAE,eAAe,EAAE,UAASN,KAAM;QAAC,CAAC;QACjFa,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC1B,IAAI;MAC7B,CAAC,CAAC;MACF,IAAGuB,QAAQ,CAACL,EAAE,EAAER,OAAO,CAACW,MAAM,CAAC,UAAU,EAAErB,IAAI,CAAC;IAEpD,CAAC;IACD,MAAMM,OAAO,CAACI,OAAO,EAAEV,IAAI,EAAC;MACxB,IAAIW,KAAK,GAAGD,OAAO,CAACE,SAAS,CAACC,IAAI,CAACS,QAAQ;MAC3C,IAAIC,QAAQ,GAAG,MAAMR,KAAK,CAAC,8BAA8B,EAAE;QACvDC,MAAM,EAAE,MAAM;QACdC,OAAO,EAAE;UAAE,cAAc,EAAE,kBAAkB;UAAE,eAAe,EAAE,UAASN,KAAM;QAAC,CAAC;QACjFa,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC1B,IAAI;MAC7B,CAAC,CAAC;MACF,IAAGuB,QAAQ,CAACL,EAAE,EACd;QACI,IAAIS,UAAU,GAAG,MAAMJ,QAAQ,CAACH,IAAI,EAAE;QACtCQ,OAAO,CAACC,GAAG,CAAC,iBAAiB,GAAGF,UAAU,CAACG,QAAQ,EAAE,CAAC;QACtDpB,OAAO,CAACW,MAAM,CAAC,SAAS,EAAErB,IAAI,CAAC;MACnC;IACJ;EACJ,CAAC;EACD+B,UAAU,EAAE;AAChB,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}