{"ast":null,"code":"export const authModule = {\n  state: {\n    isAuthenticated: false\n  },\n  mutations: {\n    setAuthState(state, new_value) {\n      state.isAuthenticated = new_value;\n    }\n  },\n  getters: {\n    isAuth(state, getters) {\n      if (state.isAuthenticated) return true;\n      return getters.getToken === \"\" ? false : true;\n    },\n    getToken(state) {\n      if (state.token) return state.token;\n      let token = sessionStorage.getItem('token');\n      if (token) return token;\n      return \"\";\n    }\n  },\n  actions: {\n    async login(context, credentials) {\n      let response = await fetch(\"https://localhost:7232/login\", {\n        method: \"Post\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify(credentials)\n      });\n      if (response.ok) {\n        let text = await response.text();\n        text = text.replaceAll('\"', \"\");\n        context.commit(\"setAuthState\", true);\n        sessionStorage.setItem('token', text);\n      } else {\n        this.hasErrors = true;\n      }\n    },\n    logout(context) {\n      sessionStorage.removeItem('token');\n      context.commit(\"setAuthState\", true);\n    }\n  },\n  namespaced: true\n};","map":{"version":3,"names":["authModule","state","isAuthenticated","mutations","setAuthState","new_value","getters","isAuth","getToken","token","sessionStorage","getItem","actions","login","context","credentials","response","fetch","method","headers","body","JSON","stringify","ok","text","replaceAll","commit","setItem","hasErrors","logout","removeItem","namespaced"],"sources":["C:/Users/Администратор/source/repos/WebNoteMiniApp/webnoteminiapp.vue/src/Store/authModule.js"],"sourcesContent":["export const authModule = {\r\n    state: {\r\n       isAuthenticated: false, \r\n    },\r\n\r\n    mutations: {\r\n        setAuthState(state,new_value){\r\n            state.isAuthenticated = new_value;\r\n        },\r\n    },\r\n\r\n    getters: {\r\n        isAuth(state, getters){\r\n            if(state.isAuthenticated) return true;\r\n            return getters.getToken === \"\" ? false : true;\r\n        },\r\n        getToken(state){            \r\n            if(state.token) return state.token;\r\n            let token = sessionStorage.getItem('token');\r\n            if(token) return token;\r\n            return \"\";\r\n        }\r\n    },\r\n\r\n    actions: {\r\n        async login(context, credentials) {\r\n            let response = await fetch(\"https://localhost:7232/login\", {\r\n                method: \"Post\",\r\n                headers: {\"Content-Type\": \"application/json\"},\r\n                body: JSON.stringify(credentials),\r\n            });\r\n            if (response.ok) {\r\n                let text = await response.text();\r\n                text = text.replaceAll('\"',\"\");\r\n                context.commit(\"setAuthState\", true);\r\n                sessionStorage.setItem('token',text);\r\n            }\r\n            else{\r\n                this.hasErrors = true;\r\n            }\r\n        },\r\n        logout(context){\r\n            sessionStorage.removeItem('token');\r\n            context.commit(\"setAuthState\", true);\r\n        },\r\n    },\r\n\r\n    namespaced: true,\r\n}"],"mappings":"AAAA,OAAO,MAAMA,UAAU,GAAG;EACtBC,KAAK,EAAE;IACJC,eAAe,EAAE;EACpB,CAAC;EAEDC,SAAS,EAAE;IACPC,YAAY,CAACH,KAAK,EAACI,SAAS,EAAC;MACzBJ,KAAK,CAACC,eAAe,GAAGG,SAAS;IACrC;EACJ,CAAC;EAEDC,OAAO,EAAE;IACLC,MAAM,CAACN,KAAK,EAAEK,OAAO,EAAC;MAClB,IAAGL,KAAK,CAACC,eAAe,EAAE,OAAO,IAAI;MACrC,OAAOI,OAAO,CAACE,QAAQ,KAAK,EAAE,GAAG,KAAK,GAAG,IAAI;IACjD,CAAC;IACDA,QAAQ,CAACP,KAAK,EAAC;MACX,IAAGA,KAAK,CAACQ,KAAK,EAAE,OAAOR,KAAK,CAACQ,KAAK;MAClC,IAAIA,KAAK,GAAGC,cAAc,CAACC,OAAO,CAAC,OAAO,CAAC;MAC3C,IAAGF,KAAK,EAAE,OAAOA,KAAK;MACtB,OAAO,EAAE;IACb;EACJ,CAAC;EAEDG,OAAO,EAAE;IACL,MAAMC,KAAK,CAACC,OAAO,EAAEC,WAAW,EAAE;MAC9B,IAAIC,QAAQ,GAAG,MAAMC,KAAK,CAAC,8BAA8B,EAAE;QACvDC,MAAM,EAAE,MAAM;QACdC,OAAO,EAAE;UAAC,cAAc,EAAE;QAAkB,CAAC;QAC7CC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACP,WAAW;MACpC,CAAC,CAAC;MACF,IAAIC,QAAQ,CAACO,EAAE,EAAE;QACb,IAAIC,IAAI,GAAG,MAAMR,QAAQ,CAACQ,IAAI,EAAE;QAChCA,IAAI,GAAGA,IAAI,CAACC,UAAU,CAAC,GAAG,EAAC,EAAE,CAAC;QAC9BX,OAAO,CAACY,MAAM,CAAC,cAAc,EAAE,IAAI,CAAC;QACpChB,cAAc,CAACiB,OAAO,CAAC,OAAO,EAACH,IAAI,CAAC;MACxC,CAAC,MACG;QACA,IAAI,CAACI,SAAS,GAAG,IAAI;MACzB;IACJ,CAAC;IACDC,MAAM,CAACf,OAAO,EAAC;MACXJ,cAAc,CAACoB,UAAU,CAAC,OAAO,CAAC;MAClChB,OAAO,CAACY,MAAM,CAAC,cAAc,EAAE,IAAI,CAAC;IACxC;EACJ,CAAC;EAEDK,UAAU,EAAE;AAChB,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}