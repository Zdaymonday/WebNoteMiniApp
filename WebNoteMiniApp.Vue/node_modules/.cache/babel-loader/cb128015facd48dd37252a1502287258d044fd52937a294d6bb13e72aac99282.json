{"ast":null,"code":"import { mapActions } from 'vuex';\nexport default {\n  name: \"edit-note-form\",\n  props: {\n    edit_note: [Object],\n    show: [Boolean]\n  },\n  methods: {\n    ...mapActions({\n      editNote: \"notes/editNote\"\n    }),\n    onNoteTextChanged(e) {\n      this.new_text = e.target.value;\n    },\n    saveChanges() {\n      let new_note = {};\n      Object.assign(new_note, this.edit_note);\n      new_note.text = this.new_text;\n      this.editNote(new_note);\n    },\n    closeForm() {\n      this.$emit(\"update:show\", false);\n    },\n    async updateNote() {\n      let new_note = {};\n      Object.assign(new_note, this.edit_note);\n      new_note.text = this.new_text;\n      let response = await fetch(\"https://localhost:7232/notes\", {\n        method: \"Put\",\n        headers: {\n          \"Content-type\": \"application/json\"\n        },\n        body: JSON.stringify(new_note)\n      });\n      if (response.ok) {\n        this.closeForm();\n      } else {\n        console.log(response.statusText);\n      }\n    }\n  },\n  data() {\n    return {\n      new_text: \"\"\n    };\n  },\n  mounted() {\n    this.new_text = this.edit_note.text;\n  }\n};","map":{"version":3,"mappings":"AAeA,SAASA,UAAS,QAAS,MAAM;AACjC,eAAe;EACXC,IAAI,EAAE,gBAAgB;EACtBC,KAAK,EAAE;IACHC,SAAS,EAAE,CAACC,MAAM,CAAC;IACnBC,IAAI,EAAE,CAACC,OAAO;EAClB,CAAC;EACDC,OAAO,EAAE;IACL,GAAGP,UAAU,CAAC;MACVQ,QAAQ,EAAE;IACd,CAAC,CAAC;IACFC,iBAAiB,CAACC,CAAC,EAAC;MAChB,IAAI,CAACC,QAAO,GAAID,CAAC,CAACE,MAAM,CAACC,KAAK;IAClC,CAAC;IACDC,WAAW,GAAG;MACV,IAAIC,QAAO,GAAI,CAAC,CAAC;MACjBX,MAAM,CAACY,MAAM,CAACD,QAAQ,EAAE,IAAI,CAACZ,SAAS,CAAC;MACvCY,QAAQ,CAACE,IAAG,GAAI,IAAI,CAACN,QAAQ;MAC7B,IAAI,CAACH,QAAQ,CAACO,QAAQ,CAAC;IAC3B,CAAC;IACDG,SAAS,GAAG;MACR,IAAI,CAACC,KAAK,CAAC,aAAa,EAAE,KAAK;IACnC,CAAC;IACD,MAAMC,UAAU,GAAE;MACd,IAAIL,QAAO,GAAI,CAAC,CAAC;MACjBX,MAAM,CAACY,MAAM,CAACD,QAAQ,EAAE,IAAI,CAACZ,SAAS,CAAC;MACvCY,QAAQ,CAACE,IAAG,GAAI,IAAI,CAACN,QAAQ;MAC7B,IAAIU,QAAO,GAAI,MAAMC,KAAK,CAAC,8BAA8B,EAAE;QACvDC,MAAM,EAAE,KAAK;QACbC,OAAO,EAAE;UAAC,cAAc,EAAC;QAAkB,CAAC;QAC5CC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACZ,QAAQ;MACjC,CAAC,CAAC;MACF,IAAGM,QAAQ,CAACO,EAAE,EAAC;QACX,IAAI,CAACV,SAAS,EAAE;MACpB,OACI;QACAW,OAAO,CAACC,GAAG,CAACT,QAAQ,CAACU,UAAU,CAAC;MACpC;IACJ;EACJ,CAAC;EACDC,IAAI,GAAE;IACF,OAAO;MACHrB,QAAQ,EAAE;IACd;EACJ,CAAC;EACDsB,OAAO,GAAG;IACN,IAAI,CAACtB,QAAO,GAAI,IAAI,CAACR,SAAS,CAACc,IAAI;EACvC;AACJ","names":["mapActions","name","props","edit_note","Object","show","Boolean","methods","editNote","onNoteTextChanged","e","new_text","target","value","saveChanges","new_note","assign","text","closeForm","$emit","updateNote","response","fetch","method","headers","body","JSON","stringify","ok","console","log","statusText","data","mounted"],"sourceRoot":"","sources":["C:\\Users\\Администратор\\source\\repos\\WebNoteMiniApp\\webnoteminiapp.vue\\src\\components\\EditNoteForm.vue"],"sourcesContent":["<template>\r\n    <div class=\"edit-note-form-wrapper\">\r\n        <div class=\"edit-note-form-inner\">\r\n            <h3>{{edit_note.title}}</h3>\r\n            <textarea rows=\"10\"  :value=\"this.new_text\" @change=\"onNoteTextChanged\">\r\n            </textarea>\r\n            <div>\r\n                <button @click=\"closeForm\">Abort</button>\r\n                <button @click=\"saveChanges\">Save changes</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapActions } from 'vuex';\r\nexport default {\r\n    name: \"edit-note-form\",\r\n    props: {\r\n        edit_note: [Object],\r\n        show: [Boolean],\r\n    },\r\n    methods: {\r\n        ...mapActions({\r\n            editNote: \"notes/editNote\",\r\n        }),\r\n        onNoteTextChanged(e){\r\n            this.new_text = e.target.value;\r\n        },\r\n        saveChanges() {\r\n            let new_note = {};\r\n            Object.assign(new_note, this.edit_note);\r\n            new_note.text = this.new_text;\r\n            this.editNote(new_note);\r\n        },\r\n        closeForm() {\r\n            this.$emit(\"update:show\", false)\r\n        },\r\n        async updateNote(){\r\n            let new_note = {};\r\n            Object.assign(new_note, this.edit_note);\r\n            new_note.text = this.new_text;\r\n            let response = await fetch(\"https://localhost:7232/notes\", {\r\n                method: \"Put\",\r\n                headers: {\"Content-type\":\"application/json\"},\r\n                body: JSON.stringify(new_note),\r\n            });\r\n            if(response.ok){\r\n                this.closeForm();\r\n            }\r\n            else{\r\n                console.log(response.statusText);\r\n            }\r\n        }\r\n    },\r\n    data(){\r\n        return {\r\n            new_text: \"\",\r\n        }\r\n    },\r\n    mounted() {\r\n        this.new_text = this.edit_note.text;\r\n    }\r\n}\r\n</script>\r\n\r\n<style>\r\n.edit-note-form-wrapper{\r\n    left: 0;right: 0; top: 0; bottom: 0;\r\n    position: fixed;\r\n    background: #76767610;\r\n}\r\n.edit-note-form-inner{\r\n    border-radius: 20px;\r\n    padding: 20px;\r\n    margin-top: 200px;\r\n    margin-left: 100px;\r\n    background: #FFFFFFF1;\r\n    display: flex;\r\n    flex-direction: column;\r\n    max-width: 30%;\r\n}\r\ntextarea{\r\n    height: max-content;\r\n    \r\n}\r\n</style>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}