{"ast":null,"code":"export const authModule = {\n  state: {\n    isAuthenticated: true,\n    token: \"\"\n  },\n  mutations: {\n    login(state) {\n      state.needAuth = false;\n    },\n    logout(state) {\n      state.needAuth = true;\n    },\n    setToken(state, token) {\n      state.token = token;\n    }\n  },\n  getters: {\n    isAuth(state) {\n      return !state.needAuth;\n    },\n    getToken(state) {\n      if (state.token) return state.token;\n      let token = sessionStorage.getItem('token');\n      if (token) return token;\n    }\n  },\n  actions: {\n    async login(context, credentials) {\n      let response = await fetch(\"https://localhost:7232/login\", {\n        method: \"Post\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify(credentials)\n      });\n      if (response.ok) {\n        let text = await response.text();\n        text = text.replaceAll('\"', \"\");\n        context.commit(\"auth/setToken\", text);\n        context.commit(\"auth/login\");\n        sessionStorage.setItem('token', text);\n      } else {\n        this.hasErrors = true;\n      }\n    }\n  },\n  namespaced: true\n};","map":{"version":3,"names":["authModule","state","isAuthenticated","token","mutations","login","needAuth","logout","setToken","getters","isAuth","getToken","sessionStorage","getItem","actions","context","credentials","response","fetch","method","headers","body","JSON","stringify","ok","text","replaceAll","commit","setItem","hasErrors","namespaced"],"sources":["C:/Users/Администратор/source/repos/WebNoteMiniApp/webnoteminiapp.vue/src/Store/authModule.js"],"sourcesContent":["export const authModule = {\r\n    state: {\r\n        isAuthenticated : true,\r\n        token: \"\",\r\n    },\r\n\r\n    mutations: {\r\n        login(state){\r\n            state.needAuth = false;\r\n        },\r\n        logout(state){\r\n            state.needAuth = true;\r\n        },\r\n        setToken(state, token){\r\n            state.token = token;\r\n        },\r\n    },\r\n\r\n    getters: {\r\n        isAuth(state){\r\n            return !state.needAuth;\r\n        },\r\n        getToken(state){            \r\n            if(state.token) return state.token;\r\n            let token = sessionStorage.getItem('token');\r\n            if(token) return token;\r\n        }\r\n    },\r\n\r\n    actions: {\r\n        async login(context, credentials) {\r\n            let response = await fetch(\"https://localhost:7232/login\", {\r\n                method: \"Post\",\r\n                headers: {\"Content-Type\": \"application/json\"},\r\n                body: JSON.stringify(credentials),\r\n            });\r\n            if (response.ok) {\r\n                let text = await response.text();\r\n                text = text.replaceAll('\"',\"\");\r\n                context.commit(\"auth/setToken\", text);\r\n                context.commit(\"auth/login\");\r\n                sessionStorage.setItem('token',text);\r\n            }\r\n            else{\r\n                this.hasErrors = true;\r\n            }\r\n        }\r\n    },\r\n\r\n    namespaced: true,\r\n}"],"mappings":"AAAA,OAAO,MAAMA,UAAU,GAAG;EACtBC,KAAK,EAAE;IACHC,eAAe,EAAG,IAAI;IACtBC,KAAK,EAAE;EACX,CAAC;EAEDC,SAAS,EAAE;IACPC,KAAK,CAACJ,KAAK,EAAC;MACRA,KAAK,CAACK,QAAQ,GAAG,KAAK;IAC1B,CAAC;IACDC,MAAM,CAACN,KAAK,EAAC;MACTA,KAAK,CAACK,QAAQ,GAAG,IAAI;IACzB,CAAC;IACDE,QAAQ,CAACP,KAAK,EAAEE,KAAK,EAAC;MAClBF,KAAK,CAACE,KAAK,GAAGA,KAAK;IACvB;EACJ,CAAC;EAEDM,OAAO,EAAE;IACLC,MAAM,CAACT,KAAK,EAAC;MACT,OAAO,CAACA,KAAK,CAACK,QAAQ;IAC1B,CAAC;IACDK,QAAQ,CAACV,KAAK,EAAC;MACX,IAAGA,KAAK,CAACE,KAAK,EAAE,OAAOF,KAAK,CAACE,KAAK;MAClC,IAAIA,KAAK,GAAGS,cAAc,CAACC,OAAO,CAAC,OAAO,CAAC;MAC3C,IAAGV,KAAK,EAAE,OAAOA,KAAK;IAC1B;EACJ,CAAC;EAEDW,OAAO,EAAE;IACL,MAAMT,KAAK,CAACU,OAAO,EAAEC,WAAW,EAAE;MAC9B,IAAIC,QAAQ,GAAG,MAAMC,KAAK,CAAC,8BAA8B,EAAE;QACvDC,MAAM,EAAE,MAAM;QACdC,OAAO,EAAE;UAAC,cAAc,EAAE;QAAkB,CAAC;QAC7CC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACP,WAAW;MACpC,CAAC,CAAC;MACF,IAAIC,QAAQ,CAACO,EAAE,EAAE;QACb,IAAIC,IAAI,GAAG,MAAMR,QAAQ,CAACQ,IAAI,EAAE;QAChCA,IAAI,GAAGA,IAAI,CAACC,UAAU,CAAC,GAAG,EAAC,EAAE,CAAC;QAC9BX,OAAO,CAACY,MAAM,CAAC,eAAe,EAAEF,IAAI,CAAC;QACrCV,OAAO,CAACY,MAAM,CAAC,YAAY,CAAC;QAC5Bf,cAAc,CAACgB,OAAO,CAAC,OAAO,EAACH,IAAI,CAAC;MACxC,CAAC,MACG;QACA,IAAI,CAACI,SAAS,GAAG,IAAI;MACzB;IACJ;EACJ,CAAC;EAEDC,UAAU,EAAE;AAChB,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}